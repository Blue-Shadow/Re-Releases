///////////////////////////////////////////////////////////////////
//Terminator
//created by: Vader
///////////////////////////////////////////////////////////////////

ACTOR Terminator 30666
{
	//$Category Stronghold_Monsters
	painchance "Stunner",128
	Health 7000
	Radius 24
	Height 64
	Mass 1500
	Speed 3
	PainChance 8
	scale 1.2
	MONSTER
	Obituary "%o was liquidated by a Terminator."
	+FLOORCLIP
	+MISSILEMORE
	+MISSILEEVENMORE
	+BOSS
	+DONTHARMCLASS
	+NORADIUSDMG
	MeleeRange 192
	Damagefactor "Redblast",0.0
	SeeSound "monster/termsit"
	PainSound "monster/termpin"
	DeathSound "monster/termdth"
	ActiveSound "Terminator/termact"
	States
	{
	Spawn:
		TERM AB 10 A_Look
		Loop
	See:
		TERM A 0 A_Playsound("Terminator/terstepA")
		TERM A 1 A_Chase
		TERM AAA 1 A_Chase("","",CHF_NOPLAYACTIVE)
		TERM A 1 A_Chase
		TERM AAA 1 A_Chase("","",CHF_NOPLAYACTIVE)
		TERM B 1 A_Chase
		TERM BBB 1 A_Chase("","",CHF_NOPLAYACTIVE)
		TERM B 1 A_Chase
		TERM BBB 1 A_Chase("","",CHF_NOPLAYACTIVE)
		TERM C 0 A_Playsound("Terminator/terstepA")
		TERM C 1 A_Chase
		TERM CCC 1 A_Chase("","",CHF_NOPLAYACTIVE)
		TERM C 1 A_Chase
		TERM CCC 1 A_Chase("","",CHF_NOPLAYACTIVE)
		TERM D 1 A_Chase
		TERM DDD 1 A_Chase("","",CHF_NOPLAYACTIVE)
		TERM D 1 A_Chase
		TERM DDD 1 A_Chase("","",CHF_NOPLAYACTIVE)
		Loop
	Pain:
		TERM L 3
		TERM L 3 A_Pain
		Goto See
	Pain.Stunner:
		TERM L 3 A_ChangeFlag("NoPain",1)
		TERM L 300 A_Pain
		TERM L 0 A_ChangeFlag("NoPain",0)
		goto See
	Missile:
		TERM E 0 A_JumpIfCloser(512, "Missile2")
		TERM E 0 A_Jump(170, "Missile2")
		TERM E 5 A_FaceTarget
		TERM F 5 Bright A_CustomMissile("TerminatorBlaster",38,15,Random(Random(2,Random(3,4)),Random(-2,(Random(-3,-4)))))
		TERM F 0 A_Spidrefire
		Goto Missile+2
	Missile2:
		TERM G 0 A_Jump(128, "Missile3")
	Melee:
		TERM G 2 A_Facetarget
		TERM H 1 Bright A_CustomBulletAttack (24, 12, 6, 3, "Terminatorpuff")
		TERM H 1 Bright A_Playsound("Terminator/tershotB")
		TERM G 2 A_Facetarget
		TERM I 1 Bright A_CustomBulletAttack (24, 12, 6, 3, "Terminatorpuff")
		TERM I 1 Bright A_Playsound("Terminator/tershotB")
		TERM G 1 A_Spidrefire
		Goto Missile2+1
	Missile3:
		TERM J 0 A_Jump(128,"Missile5")
		TERM K 0 A_JumpIfCloser(192,"Missile4")
		TERM J 8 A_Facetarget
		TERM K 8 Bright A_CustomMissile("Redgrenade", 38, -15, 0, 0)
		Goto See
	Missile4:
		TERM J 6 A_Facetarget
		TERM K 6 Bright A_CustomMissile("Redstar", 38, -15, 0, Random(2,-2))
		TERM J 6 A_Facetarget
		TERM K 6 Bright A_CustomMissile("Redstar", 38, -15, 0, Random(8,-8))
	Missile5:
		TERM J 6 A_Facetarget
		TERM K 6 Bright A_CustomMissile("Redstar", 38, -15, 0, 0)
		Goto See
	Death:
		TNT1 A 0 A_GiveToTarget("AwardItem",48)
		TERM M 6 A_Scream
		TERM N 4
		TERM OPQ 4 Bright
		TERM R 0 A_SpawnItemEx("TerminatorHead",15,0,90,10,0,0,-170)
		TERM R 0 A_SpawnItemEx("TerminatorShoulder",60,0,75,8,0,0,-70)
		TERM R 4 Bright A_SpawnItemEx("TerminatorArm",60,0,0,3,0,0,-90)
		TERM STUV 4 Bright
		TERM W 4
		TERM X 6 A_Fall
		TERM Y 6
		TERM Z 1 A_Playsound("Terminator/terstepA")
		TERM Z 5
		TERM [ 3000
		TERM [ 1 A_FadeOut(0.05)
		Wait
	}
}

ACTOR TerminatorBlaster
{
	Radius 8
	Height 12
	Speed 35
	FastSpeed 45
	Damage 8
	PROJECTILE
	RENDERSTYLE ADD
	alpha 0.85
	SeeSound "monster/brufir"
	DeathSound "weapons/hellex"
	+FORCERADIUSDMG
	States
	{
	Spawn:
		BLST A -1 Bright
		loop
	Death:
		BLST B 6 Bright A_Explode(16,128,1)
		BLST CDEFGHIJKL 3 Bright
		stop
	}
}

Actor Redstar
{
	Radius 10
	Height 20
	Speed 30
	FastSpeed 40
	Damage 4
	Scale 0.6
	+SEEKERMISSILE
	+FORCERADIUSDMG
	PROJECTILE
	RENDERSTYLE ADD
	ALPHA 0.8
	SeeSound "Terminator/tershotA"
	DeathSound "imp/shotx"
	States
	{
	Spawn:
		STAX A 0 A_SeekerMissile (15,45)
		STAX AAAA 1 Bright A_SpawnItemEx("grenadetrail")
		STAX B 0 A_SeekerMissile (15,45)
		STAX BBBB 1 Bright A_SpawnItemEx("grenadetrail")
		STAX C 0 A_SeekerMissile (15,45)
		STAX CCCC 1 Bright A_SpawnItemEx("grenadetrail")
		STAX D 0 A_SeekerMissile (15,45)
		STAX DDDD 1 Bright A_SpawnItemEx("grenadetrail")
		Loop
	Death:
		STAX E 3 Bright A_Explode(20,192,1)
		STAX FGHIJKLMNO 3 Bright
		Stop
	}
}

actor Redgrenade
{
	Radius 6
	Height 12
	Speed 30
	FastSpeed 45
	Damage 4
	PROJECTILE
	+ForceRadiusDMG
	RENDERSTYLE ADD
	ALPHA 0.8
	SeeSound "Terminator/tershotA"
	DeathSound "imp/shotx"
	var int user_theta;
	States
	{
	Spawn:
		TGND AAAABBBBCCCC 1 Bright A_SpawnItemEx("grenadetrail")
		Loop
	Death:
		STAR E 0 A_custommissile("grenadeblast",0,0,user_theta,2,0)
		STAR E 0 A_SetUserVar("user_theta",user_theta+20)
		STAR E 0 A_JumpIf(user_theta>=360,1)
		Loop
		STAR EFGHIJKLMNO 3 Bright
		Stop
	}
}

ACTOR Grenadetrail
{
	+CLIENTSIDEONLY
	PROJECTILE
	+NOCLIP
	Renderstyle ADD
	Alpha 0.6
	DamageType Redblast
	States
	{
	Spawn:
		TGTR ABCDEFGHI 4 Bright
		Stop
	}
}

actor Grenadeblast
{
	Radius 6
	Height 12
	Speed 5
	Speed 6
	Damage 3
	DamageType Redblast
	PROJECTILE
	RENDERSTYLE ADD
	+Ripper
	+ForceRadiusDMG
	+NoDamageThrust
	ALPHA 0.8
	SeeSound "imp/attack"
	DeathSound "imp/shotx"
	States
	{
	Spawn:
		TGBL ABCDEF 2 BRIGHT
	Death:
		TGBL GHIJK 2 Bright
		stop
	}
}

ACTOR Terminatorpuff : Bulletpuff
{
	Renderstyle ADD
	Alpha 0.75
	scale 0.75
	States
	{
	Spawn:
	Melee:
		TPUF A 2 Bright
		TPUF A 0 A_Jump(128,10)
		TPUF BCDEFGH 2 Bright
		Stop
		TPUF IJKLMNO 2 Bright
		Stop
	}
}

ACTOR TerminatorArm
{
	+CLIENTSIDEONLY
	Radius 12
	Height 15
	Speed 3
	Mass 1000
	scale 1.2
	BounceType Doom
	States
	{
	Spawn:
		TARM ABCDE 5
		TARM F 3000
		TARM F 1 A_FadeOut(0.05)
		Wait
	}
}

actor TerminatorHead : TerminatorArm
{
	Radius 6
	Height 8
	Speed 10
	+DROPOFF
	+Missile
	scale 1.2
	States
	{
	Spawn:
		THAD DEFGHABC 2
		loop
	Death:
		"####" I 3000
		"####" I 1 A_FadeOut(0.05)
		Wait
	}
}

actor TerminatorShoulder : TerminatorHead
{
	Radius 8
	Speed 8
	States
	{
	Spawn:
		TSHO ABCDEFGH 2
		loop
	}
}